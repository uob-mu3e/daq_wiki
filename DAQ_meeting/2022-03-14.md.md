Present: *Alex, Ann-Kathrin, Martin, Sebastian, Cristina, Haris, Marius, Gavin, Konrad, Luigi, Yannick, Thomas, Nik*

# Firmware, Software and Setup Status and Activities #

### Mainz ###

* Martin is debugging the firmware for the pixel configuration (masking, TDACS). Because of the load bug in MuPix10, the shift registers are not independent, requiring some changes.
* Alex is working on a link record type taking care of SOP, EOP etc., sould simplify and unify state machines, alleviate some timing problems. Konrad also wants to introduce a record type for MuTrig hits.
* Marius worked on the switching board firmware (review afterwards) and on the SciFi hackathon (see below)
* Haris is working on event stepping on the GPU
* Nik did some debugging and chased away a bunch of warnings

### Zürich ###

Significant progress made in SciFi DAQ hackathon: 
* Mutrig configuration via NIOS works fine
* PRBS data arrives to the switching board and the online analyzer
* Efforts to lock the PLL ongoing: injection with a 100 kHz pulse (in mutrig PLL config) shows a peak at the corresponding deltaT, but also presents a background of random data, probably coming from an empty FIFO in the FEB (under investigation, probably solved when updating firmware. Not present in PRBS mode). The peak moves position when tuning the VNVCO parameter (as expected). 

![IMG_4050.jpg](https://bitbucket.org/repo/7zKBgbq/images/1788722081-IMG_4050.jpg)

* Cristina is working on a comparison of configuration patterns to test the MIDAS config chain.

### Geneva ###

* Was in Zürich

### Heidelberg Pixels ###

* Luigi and Pepe working on MIDAS DAQ for QC tests, making good progress. Reading back data (farm FE) next. 
* Pixel config for the cosmic run should come from local JSON files.
* Thomas requests some integration run discussion after firmware review. Amongst the outcomes: Pixel chips should be identified by on ID as defined in the specbook. Translation to things like FEB/Port need to happen in the code automatically.
* Chips should be tuned such that the PLL is truly locked. DAQ will consider bad locks as broken.


### Heidelberg Tiles ###

* Konrad: TMB should be submitted today. updated DAB next.

### KIT ###

* Buying PC.

### MIDAS ###

* Nik fixed some warnings

### Setup at PSI ###

* For the farm, propose a 2 PC solution, one for the fibres (just streaming), one for the pixels testing DDR4 and GPU

### Heidelberg telescope upgrade ###

* No news.

### Pull requests ###

What can we merge? - All merged. 

[See here](https://bitbucket.org/mu3e/online/pull-requests/)

### Bitbucket issues ###

Have a look - the list is not getting shorter (yet?). Close things that are solved. Add issues if you discover them. Work to tackle them... Use CRITCAL for issues that are needed for the cosmic run.

[See here](https://bitbucket.org/mu3e/online/issues?status=new&status=open)


# Cosmic run checklist #

### Before we go to PSI ###

* Can configure MuPix and MuTrig from MIDAS via FEB reliably and with a MIDAS UI. *Ongoing, progress being made*
* FEB SlowControl interface works reliably *No more errors seen - is this gone?*
* Have diagnostics for all links, PLLs and clocks in place, including MIDAS UI *Links ready, PLL firmware ready*
* Sorter works in HW with data generators and source (also for MuTrig) *Looks good for MuPix, stretch goal for MuTrig*
* We have a clear understanding how to handle 1.25 GBit link aligment, 8b/10b errors, resync etc. *Irrelevant if PLL is properly locked*
* We can do run starts and configs with the ODB on the backend (i.e. not the switch and not the farm) *Set up in Mainz this week*
* We have a list of things to achieve with priorities

### Early stuff for PSI ###

Nik and Martin will start setting up next week, these points should be ok by then.

* Set-up network including dedicated gateway, do performance tests
* Clear and re-cable the fibre fanout rack
* Recuperate the 2-3 fibres from the area

## Review of Switching Firmware ##
Branch under discussion: origin/feature/swb_intRun22
With focus on the following files: 
online/common/firmware/a10/time_merger_tree_fifo_32_v3.vhd
online/common/firmware/a10/time_merger_v4.vhd

## Next week ##

Another DAQ meeting, another review.